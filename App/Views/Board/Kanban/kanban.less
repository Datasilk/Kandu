@import "../all-color.less";
@shadow:2px 2px 5px rgba(0,0,0,0.3);
@shadow-sm:1px 1px 2px rgba(0, 0, 0, 0.2);

body{overflow:hidden;}

.board .message{margin-top:-4px !important; margin-bottom:-20px !important; width:~"calc(100% - 20px)";}

.drag-delete{position:absolute; width:100%; text-align:center;}
.drag-delete .delete-area{border:2px solid rgba(255,255,255,0.3); padding:7px 100px; display:inline-block; position:relative; top:-5px;
    span{display:inline-block; font-size:17px; font-weight:400; text-align:center; padding-left:5px; position:relative; top:-5px;}
}
.drag-delete.hovering .delete-area{background-color:rgba(255,255,255,0.3);}

/* toolbar /////////////////////////////////////// */
.kanban > .toolbar{flex-direction:row; align-content:stretch; display:flex;
    .col.msg{flex-grow:1;}
}

/* lists ///////////////////////////////////////// */
.kanban {overflow:hidden;
    .lists .columns{white-space:nowrap;
        & > .col{min-width:238px; border-radius:4px; margin-right:7px; margin-bottom:30px; height:auto;
            &.bg{box-shadow:@shadow;}
        }
        & > .add-list{
            a{width:100%; box-sizing:border-box; font-weight:400;}
        }
    }

    .list { position:relative; background-color:#e9e9e9; 
        .items{float:left; position:relative; padding:0 4px;
            .drag{position:relative;}
            &.hovering{height:40px;}
        }
        .item{width:216px; box-shadow:@shadow-sm; border-radius:4px; background-color:#ffffff; padding:8px; margin:7px 0; overflow:hidden; cursor:pointer;
            .title{font-size:15px; font-weight:400; line-height:1.5; white-space:normal; width: 100%; display: inline-block;}
            &.dragging{transform:rotate(7deg); z-index:100; box-shadow:@shadow;}
            &.separator{
                &:before{border-top:1px solid rgba(0, 0, 0, 0.2); content:'';width:~"calc(100% + 24px)";display:block; margin-left:-12px;}
                &:hover:before{border-top:1px solid rgba(0, 0, 0, 0.2);}
                &:hover{background-color:rgba(0,0,0,0.1) !important;}
            }
            &.separator, &.header{box-shadow:none !important; background-color:transparent !important;}
            &.header{margin:0; padding:0;}
            &.header:hover{background-color:rgba(0,0,0,0.1) !important;}
            .checkmark{display:inline-block; padding:0 5px 0 0;
                svg{width:16px; height:16px;}
            }
        }
        .list-items{position:relative;}
        .movable{position:relative; max-width:224px;}
        .movable:after{content:'';display:block;clear:both;}
        .scroller{position:relative; float:right; background-color:rgba(0,0,0,0.05); width:10px; height:100%; overflow:hidden; border-radius:10px; margin-top:7px;}
        .scrollbar{position:relative; background-color:rgba(0,0,0,0.1); width:10px; min-height:20px; overflow:hidden; border-radius:10px;}
        .scrollable{overflow:hidden; max-width:224px;
            .scroller{display:none;}
            &:after{content:' '; display:block; clear:both; height:0; overflow:hidden;}
            &.scroll{ max-width:234px;
                .items{float:left; width:224px;}
                .item{padding-right:8px;}
                .scroller{display:block;} 
            }
        }
        &.hovering{
            &.rightside{margin-right:262px;}
            &.leftside{margin-left:262px;}
        }
        &.dragging{transform:rotate(7deg); z-index:100; position:relative;}
    }
    .drag{
        &.hovering.upward{padding-top:50px !important;}
        &.hovering.downward{padding-bottom:50px !important;}
    }
}

/* list used for cloning card while dragging */
.kanban > .list{position:absolute;width:0;height:0;}

.kanban {
    & > .scroller{position:relative; background-color:rgba(0,0,0,0.05); top: -21px; left:10px; width:~"calc(100% - 20px)"; height:13px; overflow:hidden; border-radius:10px;
        .scrollbar{position:relative; left:0px; background-color:rgba(0,0,0,0.1); min-width:20px; height:13px; overflow:hidden; border-radius:10px;}
    }
}


.board .list-head{line-height:1.5; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; width: 100%; display: inline-block;
    .more{float:right; opacity:0.5; margin-right:3px; padding:0 5px; height:25px; border-radius:4px;
        &:hover{background-color:rgba(0,0,0,0.2);}
        svg{width:16px; cursor:pointer;}
    }
}

.box > .list-menu{position:absolute; top:100px; left:0; max-width:250px; height:auto; box-shadow:2px 2px 5px rgba(0, 0, 0, 0.3); border-radius:3px;
    .menu-header span{opacity:0.5;}
    li{ list-style:none; padding:10px; font-weight:bold;
        &.item{cursor:pointer;}
        &.disabled{opacity:0.3; cursor:default;}
        &.separator:after{content:''; width:100%; border-bottom:1px solid rgba(0,0,0,0.1); height:1px; display:block;}
    }
}

/* card details popup /////////////////////////// */
.box .popup{
    .title{max-width:~"calc(100% - 30px)";}
    .card-field-title{position:absolute; top:9px; left:9px; width:~"calc(100% - 48px)";
        textarea{font-size:1.3rem !important; line-height:1.25; overflow:hidden;}
        .textarea-clone{opacity:0; position:absolute; z-index:-1; width:100%; height:0px; top:0;
            & > div{position:absolute; width:100%; min-height:38px; padding:11px; font-size:1.3rem !important; white-space:normal; line-height:1.25; box-sizing:border-box; border-width:1px; box-sizing:border-box;}
        }
    }
}
.card-details{width:~"calc(100% - 200px)" !important;
    a:link{text-decoration:underline;}
    .new-description{border-radius:4px; margin-bottom:20px; padding:10px;
    }
    .new-description, .description-title{opacity:0.7;}
    .markdown{line-height:1.25; font-weight:400; padding:0 0 30px 0;
        ul{padding:10px 0 20px 10px;}
    }
    .description-title{padding-bottom:10px;}
}
.card-menu{width:130px !important;
    a{display:block !important; margin-bottom:5px; font-size:14px;}
    h6{padding-bottom:7px;}
}


/* new list ///////////////////////////////////// */
@newlist-height:84px;

.form-new-list{ 
    z-index:10; box-shadow: @shadow; border-radius:4px; overflow:hidden; position:absolute;
    &.hide{height:45px;}
    &.cancel{opacity:0; animation:cancelnewlist 0.3s ease-in-out; -webkit-animation:cancelnewlist 0.3s ease-in-out; height:45px;}
    &.show{animation:newlist 0.3s ease-in-out; -webkit-animation:newlist 0.3s ease-in-out; height:@newlist-height;}
    input[type="text"]{padding:0 10px !important; font-weight:bold;}
}

@keyframes newlist {
    from { height: 45px; opacity:0 }
    to { height: @newlist-height; opacity:1 }
}
@-moz-keyframes newlist {
    from { height: 45px; opacity:0 }
    to { height: @newlist-height; opacity:1 }
}
@-webkit-keyframes newlist {
    from { height: 45px; opacity:0 }
    to { height: @newlist-height; opacity:1 }
}

@keyframes cancelnewlist {
}
@-moz-keyframes cancelnewlist {
    from { height: @newlist-height; opacity:1;}
    to { height: 45px; opacity:0; }
}
@-webkit-keyframes cancelnewlist {
    from { height: @newlist-height; opacity:1;}
    to { height: 45px; opacity:0; }
}

/* new card ///////////////////////////////////// */
@newcard-height:85px;

.box .form-new-card{ 
    z-index:10; overflow:hidden; padding:4px;
    .text-field input{border:0 transparent !important; box-shadow:@shadow-sm !important; border-radius:4px !important; background-color:#fffff; padding:7px 7px 25px 7px !important;
                &:focus{border:0 transparent !important; outline:0 transparent !important;}
    }
    &.hide{min-height:45px;}
    &.cancel{opacity:0; animation:cancelnewcard 0.3s ease-in-out; -webkit-animation:cancelnewcard 0.3s ease-in-out; min-height:0px;}
    &.show{animation:newcard 0.3s ease-in-out; -webkit-animation:newcard 0.3s ease-in-out; min-height:@newcard-height;}
    textarea{overflow:hidden; height:42px; resize:none; font-weight:400; padding:10px; line-height:1.5;}
    .textarea-clone{opacity:0; position:absolute; z-index:-1; width:100%; height:0px; top:0;
        & > div{position:absolute; width:100%; min-height:30px; font-size:15px; font-weight:400; padding:10px; white-space:normal; line-height:1.5; box-sizing:border-box; border-width:1px; box-sizing:border-box;}
    }
}

@keyframes newcard {
    from { min-height: 0px; opacity:0 }
    to { min-height: @newcard-height; opacity:1 }
}
@-moz-keyframes newcard {
    from { min-height: 0px; opacity:0 }
    to { min-height: @newcard-height; opacity:1 }
}
@-webkit-keyframes newcard {
    from { min-height: 0px; opacity:0 }
    to { min-height: @newcard-height; opacity:1 }
}

@keyframes cancelnewcard {
}
@-moz-keyframes cancelnewcard {
    from { min-height: @newcard-height; opacity:1;}
    to { min-height: 0px; opacity:0; }
}
@-webkit-keyframes cancelnewcard {
    from { min-height: @newcard-height; opacity:1;}
    to { min-height: 0px; opacity:0; }
}